#!/usr/bin/env node
var e=require("commander"),n=require("path"),r=require("simple-git"),o=require("fs-extra");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=t(r),c=new e.Command,a=require("child_process").spawn,s={pro:function(e){try{var r=n.resolve(e),t=n.join(__dirname,"../templates/root-project"),c=function(c,s){try{var u=Promise.resolve(o.copy(t,r)).then(function(){var t=function(e){try{return require(n.join(e,"package.json"))}catch(e){return{}}}(r);return t.name=e,Promise.resolve(o.writeFile(n.join(r,"package.json"),JSON.stringify(t,void 0,2))).then(function(){return Promise.resolve(o.writeFile(n.join(r,".gitignore"),"\nnode_modules\n.idea\n.vscode\n.DS_Store\nyarn-error.log\n.env\nlerna-debug.log\n*.map\n")).then(function(){return Promise.resolve(o.mkdir(n.join(r,"packages"))).then(function(){return Promise.resolve(i.default().cwd(r).init()).then(function(){a("yarn",["install"],{stdio:"inherit",cwd:r}).on("close",function(){})})})})})})}catch(e){return s(e)}return u&&u.then?u.then(void 0,s):u}(0,function(e){console.log(e)});return Promise.resolve(c&&c.then?c.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},pack:function(e){try{var r=require("child_process").spawn,t="@"+(function(){var e;try{e=require(n.resolve("package.json"))}catch(n){e={}}return e}().name||"unknown")+"/"+e,i=n.join(__dirname,"../templates/package"),c=n.resolve("packages/"+e),a=function(e,a){try{var s=Promise.resolve(o.copy(i,c)).then(function(){var e=n.join(c,"package.json"),i=require(e),a=r("npx",["lerna","bootstrap"],{stdio:"inherit"});return i.name=t,Promise.resolve(o.writeFile(e,JSON.stringify(i,void 0,2))).then(function(){return Promise.resolve(o.mkdir(n.join(c,"src"))).then(function(){a.on("close",function(){})})})})}catch(e){return a(e)}return s&&s.then?s.then(void 0,a):s}(0,function(e){console.log(e)});return Promise.resolve(a&&a.then?a.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}};!function(e){e.command("g <type> [name]").description("创建文件").action(function(e,n){if(void 0===n&&(n="unknown"),!(e in s)||"function"!=typeof s[e])throw new TypeError("搞出问题了！没有对应模式!!");s[e](n)})}(c),c.parse(process.argv);
//# sourceMappingURL=index.js.map
