#!/usr/bin/env node
import{Command as n}from"commander";import{resolve as e,join as r}from"path";import o from"simple-git";import{copy as t,writeFile as i,mkdir as c}from"fs-extra";var s=new n,a=require("child_process").spawn,u={pro:function(n){try{var s=e(n),u=r(__dirname,"../templates/root-project"),m=function(e,m){try{var f=Promise.resolve(t(u,s)).then(function(){var e=function(n){try{return require(r(n,"package.json"))}catch(n){return{}}}(s);return e.name=n,Promise.resolve(i(r(s,"package.json"),JSON.stringify(e,void 0,2))).then(function(){return Promise.resolve(i(r(s,".gitignore"),"\nnode_modules\n.idea\n.vscode\n.DS_Store\nyarn-error.log\n.env\nlerna-debug.log\n*.map\n")).then(function(){return Promise.resolve(c(r(s,"packages"))).then(function(){return Promise.resolve(o().cwd(s).init()).then(function(){a("yarn",["install"],{stdio:"inherit",cwd:s}).on("close",function(){})})})})})})}catch(n){return m(n)}return f&&f.then?f.then(void 0,m):f}(0,function(n){console.log(n)});return Promise.resolve(m&&m.then?m.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},pack:function(n){try{var o=require("child_process").spawn,s="@"+(function(){var n;try{n=require(e("package.json"))}catch(e){n={}}return n}().name||"unknown")+"/"+n,a=r(__dirname,"../templates/package"),u=e("packages/"+n),m=function(n,e){try{var m=Promise.resolve(t(a,u)).then(function(){var n=r(u,"package.json"),e=require(n),t=o("npx",["lerna","bootstrap"],{stdio:"inherit"});return e.name=s,Promise.resolve(i(n,JSON.stringify(e,void 0,2))).then(function(){return Promise.resolve(c(r(u,"src"))).then(function(){t.on("close",function(){})})})})}catch(n){return e(n)}return m&&m.then?m.then(void 0,e):m}(0,function(n){console.log(n)});return Promise.resolve(m&&m.then?m.then(function(){}):void 0)}catch(n){return Promise.reject(n)}}};!function(n){n.command("g <type> [name]").description("创建文件").action(function(n,e){if(void 0===e&&(e="unknown"),!(n in u)||"function"!=typeof u[n])throw new TypeError("搞出问题了！没有对应模式!!");u[n](e)})}(s),s.parse(process.argv);
//# sourceMappingURL=index.module.js.map
